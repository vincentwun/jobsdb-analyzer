<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Analysis - JobsDB Analyzer</title>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" as="style"
    onload="this.onload=null;this.rel='stylesheet'">
  <link rel="stylesheet" href="/index/index.css">
  <link rel="stylesheet" href="/setting/setting.css">
  <link rel="stylesheet" href="/analysis/analysis.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Chart.js for data visualization -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>

<body>
  <div class="app">
    <aside class="sidebar" data-inject></aside>

    <main class="main">
      <section class="panel">
  <h2><i class="fas fa-chart-line" aria-hidden="true" style="margin-right:8px"></i>AI Analysis</h2>
  <p class="muted-note">Use Gemini AI to analyze job descriptions and extract structured insights</p>

        <!-- File Selection -->
        <div class="file-selection">
          <div class="file-selection-row">
            <label class="file-selection-label">Select source file:</label>
            <select id="fileSelector" class="file-select">
              <option value="">-- Loading... --</option>
            </select>
          </div>

          <!-- File Info -->
          <div id="fileInfo" class="file-info">
            <div class="file-info-line"><strong>Loaded:</strong> <span id="currentFileName"></span></div>
            <div class="file-info-line"><strong>Jobs:</strong> <span id="jobCount"></span></div>
          </div>
        </div>

        <!-- Analysis Controls -->
        <div class="analysis-panel">
          <h3>Analysis Options</h3>

          <div class="form-group">
            <label>Preset Analysis:</label>
            <select id="presetSelector" class="form-select">
              <option value="skills">Analyze Most Common Skills (Python, Docker, K8s, AWS, etc.)</option>
              <option value="certs">Analyze Required Certifications (AWS SAA, Azure AZ-104, etc.)</option>
            </select>
          </div>

          <div class="analysis-actions">
            <button id="analyzeBtn" disabled class="btn-accent">Start Analysis</button>
          </div>
        </div>

        <!-- Status -->
        <div id="statusArea" class="status-area">
          <div id="statusMessage" class="status-message"></div>
        </div>

        <!-- Results -->
        <div id="resultsArea" class="results-area">
          <h3 id="resultsTitle" class="results-title">Analysis Results</h3>
          <p id="resultsSummary" class="results-summary"></p>
          
          <!-- Chart Container -->
          <div class="card panel-card">
            <canvas id="analysisChart"></canvas>
          </div>

          <!-- Data Table -->
          <div class="card panel-card table-card">
            <h4 class="table-title">Detailed Statistics</h4>
            <table id="dataTable">
              <thead>
                <tr>
                  <th>Item</th>
                  <th>Category</th>
                  <th class="text-right">Count</th>
                  <th class="text-right">Percentage</th>
                </tr>
              </thead>
              <tbody id="dataTableBody"></tbody>
            </table>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="/dist/app.js"></script>
  <script src="/dist/analysis.js"></script>
</body>

</html>